# ============================================================================
# Session Backup System Configuration
# ============================================================================
# This configuration file controls all aspects of the automated session backup
# system. Each setting has been carefully chosen for optimal performance and
# reliability while maintaining security and storage efficiency.
#
# Configuration Format:
# - Lines starting with # are comments
# - Settings use KEY=VALUE format (no spaces around =)
# - Paths can use ~ for home directory expansion
# - Boolean values: true/false (case insensitive)
# - Lists use comma separation without spaces
# ============================================================================

# ============================================================================
# [PATHS] - Directory and File Locations
# ============================================================================
# These settings define where the backup system reads from, writes to, and
# stores operational files. All paths support ~ expansion for home directory.

[PATHS]

# SOURCE_DIR: Primary directory containing session data to backup
# Default: ~/.opencode/sessions (auto-detected if opencode is installed)
# Impact: This is the root directory that will be recursively backed up
# Security: Ensure this path doesn't contain sensitive non-session data
SOURCE_DIR=~/.opencode/sessions

# BACKUP_DIR: Destination directory for backup archives
# Default: ~/backups/sessions
# Impact: All backup files (.tar.gz) will be stored here with timestamps
# Storage: Ensure sufficient disk space based on SOURCE_DIR size and retention
BACKUP_DIR=~/backups/sessions

# LOG_DIR: Directory for backup operation logs
# Default: ~/backups/logs
# Impact: Contains detailed logs for troubleshooting and audit trails
# Maintenance: Logs are automatically rotated based on LOGGING settings
LOG_DIR=~/backups/logs

# LOCK_FILE: Prevents multiple backup processes from running simultaneously
# Default: /tmp/session-backup.lock
# Impact: Critical for preventing data corruption from concurrent backups
# Security: Should be in a location writable only by the backup user
LOCK_FILE=/tmp/session-backup.lock

# ============================================================================
# [RETENTION] - Backup Lifecycle Management
# ============================================================================
# These settings control how long backups are kept and storage limits to
# prevent disk space exhaustion while maintaining adequate recovery history.

[RETENTION]

# RETENTION_DAYS: Maximum age of backups before automatic deletion
# Default: 30 days
# Range: 1-365 days
# Impact: Older backups are automatically purged during each backup cycle
# Consideration: Balance storage costs with recovery requirements
RETENTION_DAYS=30

# MAX_BACKUPS: Maximum number of backup files to retain regardless of age
# Default: 100 backups
# Range: 5-1000 backups
# Impact: Prevents unlimited backup accumulation even within retention period
# Storage: Each backup is typically 10-100MB depending on session data volume
MAX_BACKUPS=100

# MIN_FREE_SPACE_GB: Minimum free disk space required before backup starts
# Default: 5 GB
# Range: 1-100 GB
# Impact: Backup operation aborts if insufficient space, preventing system issues
# Safety: Ensures system stability by maintaining adequate free space
MIN_FREE_SPACE_GB=5

# ============================================================================
# [COMPRESSION] - Archive Creation and Optimization
# ============================================================================
# These settings control how backup archives are created, compressed, and
# verified to ensure data integrity while optimizing storage efficiency.

[COMPRESSION]

# COMPRESSION_LEVEL: gzip compression level for backup archives
# Default: 6 (balanced compression/speed)
# Range: 1-9 (1=fastest/largest, 9=slowest/smallest)
# Impact: Higher levels save storage but increase backup time significantly
# Recommendation: 6 provides optimal balance for most use cases
COMPRESSION_LEVEL=6

# EXCLUDE_PATTERNS: File patterns to exclude from backups (comma-separated)
# Default: "*.tmp,*.log,*.cache"
# Format: Shell glob patterns, no spaces between commas
# Impact: Reduces backup size by excluding temporary and cache files
# Customization: Add patterns for IDE files, build artifacts, etc.
EXCLUDE_PATTERNS=*.tmp,*.log,*.cache,*.swp,*~,.DS_Store,Thumbs.db

# VERIFY_INTEGRITY: Test archive integrity after creation
# Default: true
# Impact: Ensures backup archives are not corrupted but adds processing time
# Security: Critical for detecting storage issues or corruption early
# Performance: Adds ~10-20% to backup time but prevents data loss
VERIFY_INTEGRITY=true

# ============================================================================
# [NOTIFICATIONS] - Alert and Communication Settings
# ============================================================================
# These settings control when and how the backup system sends notifications
# about backup status, failures, and important events.

[NOTIFICATIONS]

# EMAIL_ON_FAILURE: Send email notifications when backups fail
# Default: false
# Impact: Enables proactive monitoring of backup health
# Requirement: Requires SMTP configuration if enabled
EMAIL_ON_FAILURE=false

# EMAIL_ADDRESS: Recipient email address for backup notifications
# Default: "" (empty, notifications disabled)
# Format: Standard email address (user@domain.com)
# Security: Ensure email account is secure and monitored
EMAIL_ADDRESS=

# SMTP_SERVER: SMTP server for sending notification emails
# Default: "" (empty, use system default)
# Format: hostname:port (e.g., smtp.gmail.com:587)
# Security: Use TLS/SSL enabled servers, avoid plain text authentication
SMTP_SERVER=

# NOTIFICATION_LEVEL: Minimum event level for notifications
# Default: "ERROR"
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Impact: Controls notification frequency (ERROR = failures only)
# Recommendation: Start with ERROR, increase to WARNING if needed
NOTIFICATION_LEVEL=ERROR

# ============================================================================
# [LOGGING] - Audit Trail and Troubleshooting
# ============================================================================
# These settings control how backup operations are logged for troubleshooting,
# compliance, and performance monitoring.

[LOGGING]

# LOG_LEVEL: Minimum event level to record in log files
# Default: "INFO"
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Impact: DEBUG creates very detailed logs, INFO provides operational summary
# Storage: DEBUG logs can be 10x larger than INFO logs
LOG_LEVEL=INFO

# MAX_LOG_SIZE_MB: Maximum size of individual log files before rotation
# Default: 10 MB
# Range: 1-100 MB
# Impact: Controls when log files are rotated to prevent unlimited growth
# Performance: Larger files may slow log analysis tools
MAX_LOG_SIZE_MB=10

# LOG_RETENTION_COUNT: Number of rotated log files to keep
# Default: 5 files
# Range: 1-20 files
# Impact: Total log storage = MAX_LOG_SIZE_MB Ã— LOG_RETENTION_COUNT
# Compliance: Ensure retention meets audit requirements
LOG_RETENTION_COUNT=5

# TIMESTAMP_FORMAT: Format string for log timestamps
# Default: "%Y-%m-%d %H:%M:%S" (ISO-like format)
# Format: Python strftime format codes
# Impact: Affects log readability and parsing by external tools
# Standards: ISO format recommended for international compatibility
TIMESTAMP_FORMAT=%Y-%m-%d %H:%M:%S

# ============================================================================
# Configuration Notes and Best Practices
# ============================================================================
#
# SECURITY CONSIDERATIONS:
# - Ensure backup directories have appropriate permissions (700 or 750)
# - Use dedicated backup user account when possible
# - Regularly test backup restoration procedures
# - Monitor backup logs for security events
#
# PERFORMANCE OPTIMIZATION:
# - Schedule backups during low-activity periods
# - Use SSD storage for backup destinations when possible
# - Monitor backup duration and adjust compression level if needed
# - Consider incremental backups for very large session directories
#
# DISASTER RECOVERY:
# - Store critical backups on separate physical devices
# - Test restoration procedures regularly
# - Document recovery procedures and keep them updated
# - Consider off-site backup storage for critical data
#
# MONITORING AND MAINTENANCE:
# - Review backup logs weekly for errors or warnings
# - Monitor disk space usage trends
# - Verify backup integrity monthly with test restorations
# - Update configuration as requirements change
#
# ============================================================================